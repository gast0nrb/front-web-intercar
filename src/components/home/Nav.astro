---
async function getCategories() {
    try {
        const res = await fetch(
            "http://localhost:8080/api/intercar/categories",
            {
                mode: "cors",
                method: "GET",
            },
        );
        const data = await res.json();
        return data;
    } catch (err) {
        return err;
    }
}
const categories = await getCategories();
---

<nav class="text-xs w-full flex bg-neutral-900 text-neutral-300 p-1">
    {
        !categories.error ? (
            <ul class="justify-around xs:w-8/12 md:w-10/12">
                <li>Ups, no pudimos cargar categorias :(</li>
            </ul>
                <a href="/categorias" class="hover:text-orange-500 border-l-2 border-orange-500 pl-2 duration-100 flex-grow text-center">
                    Ver categorias
                </a>
        ) : (
            <ul class="justify-around xs:w-8/12 md:w-2/3 flex">
                {categories.data.map((category: any) => (
                    <a href={`/categoria/${category.name.toLowerCase()}`}>
                        <li class="hover:text-orange-500 duration-100 border-l-2 border-zinc-400">{category.name}</li>
                    </a>
                ))}
            </ul>
                <a href="/categorias" class="hover:text-orange-500 border-l-2 border-orange-500 pl-2 duration-100 flex-grow text-center">
                    Ver categorias
                </a>
        )
    }
</nav>
